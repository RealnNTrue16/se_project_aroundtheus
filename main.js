!function(){"use strict";const e={formSelector:".modal__popup__form",inputSelector:".modal__popup__input",submitButtonSelector:".modal__popup__button",inactiveButtonClass:"modal__popup__button_disabled",inputErrorClass:"modal__popup__input_type_error",errorClass:"modal__popup__error_visible"};class t{constructor(e,t,o,r,n){this._name=e.name,this._link=e.link,this._id=e._id,this._like=e.isLiked,this._cardSelector=t,this._handleImageClick=o,this._handleCardDelete=r,this._handleCardLike=n}viewCard(){const e=document.querySelector(this._cardSelector).content.firstElementChild.cloneNode(!0);return this._cardElement=e,this._createCard(),this._setEventListeners(),this._cardElement}_createCard(){const e=this._cardElement.querySelector(".card__image"),t=this._cardElement.querySelector(".card__title");e.src=this._link,e.alt=this._name,t.textContent=this._name,this._updateLikeStatus()}_setEventListeners(){this._cardElement.querySelector(".card__like-button").addEventListener("click",(()=>{this._handleCardLike(this)})),this._cardElement.querySelector(".card__delete").addEventListener("click",(()=>{this._handleCardDelete(this)})),this._cardElement.querySelector(".card__image").addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_updateLikeStatus(){this._like?(this._cardElement.querySelector(".card__like-button").classList.add("card__like-button_active"),console.log("Liked!")):this._cardElement.querySelector(".card__like-button").classList.remove("card__like-button_active")}_handleCardDelete(){this._cardElement.remove()}updateLike(e){this._like=e,this._updateLikeStatus()}}class o{constructor(e,t){this._config=e,this._form=t,this._inputElements=[...this._form.querySelectorAll(e.inputSelector)],this._submitButton=this._form.querySelector(this._config.submitButtonSelector)}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners(),this._toggleButtonState()}_setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._handleInputEvent(e)}))}))}_handleInputEvent(e){this._checkInputValidity(e),this._toggleButtonState()}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._config.errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.textContent=" ",t.classList.remove(this._config.errorClass)}_checkFormValidity(){return this._inputElements.every((e=>e.validity.valid))}_toggleButtonState(){this._checkFormValidity()?(this._submitButton.classList.remove(this._config.inactiveButtonClass),this._submitButton.disabled=!1):(this._submitButton.classList.add(this._config.inactiveButtonClass),this._submitButton.disabled=!0)}resetForm(){this._form.reset(),this._inputElements.forEach((e=>{this._hideInputError(e)})),this._toggleButtonState()}}class r{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}openPopup(){console.log("opening with class"),this._popupElement.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscClose)}closePopup(){this._popupElement.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscClose)}setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{console.log("Closed with Close button"),this.closePopup()})),this._popupElement.addEventListener("click",(e=>{e.target===this._popupElement&&(console.log("Closed By Overlay Click"),this.closePopup())}))}_handleEscClose=e=>{"Escape"===e.key&&(console.log("ESC"),this.closePopup())}}class n extends r{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._formInputs=[...this._popupForm.querySelectorAll(".modal__form-input")]}_getInputValues(){const e={};return this._formInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this._popupForm.reset()}))}}const s=document.querySelector("#profile__edit-button"),a=document.querySelector("#profile__edit-modal"),i=(a.querySelector(".modal__close"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile__title-input")),c=document.querySelector("#profile__description-input"),l=a.querySelector(".modal__form"),d=(document.querySelector("#profile__edit-modal"),document.querySelector("#card-template").content.firstElementChild,document.querySelector(".cards__list"),document.querySelector("#card__add-modal")),u=document.querySelector(".profile__add-button"),p=(d.querySelector(".modal__close"),d.querySelector(".modal__form")),_=(d.querySelector("#card__title-input"),d.querySelector("#card__description-input"),d.querySelector(".modal__button")),m=(document.querySelector("#card__add-modal"),document.querySelector("#preview__modal").querySelector(".modal__close"),document.querySelector("#preview__modal"),document.querySelector("#delete__modal")),h=m.querySelector(".modal__button"),f=m.querySelector(".modal__close"),g=document.querySelector("#avatar__modal"),v=document.querySelector(".profile__avatar-edit"),E=g.querySelector(".modal__close"),k=g.querySelector(".modal__button"),S=new class{constructor(e,t){let{item:o,renderer:r}=e;this._renderer=r,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({item:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:B},".cards__list"),y=new class{constructor(e){let{name:t,job:o,avatar:r}=e;this._name=document.querySelector(t),this._job=document.querySelector(o),this._avatar=document.querySelector(r)}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUserInfo(e){let{name:t,job:o}=e;this._name.textContent=t,this._job.textContent=o}setUserAvatar(e){this._avatar.src=e}}({name:".profile__title",job:".profile__description",avatar:".profile__image"}),C=new n("#profile__edit-modal",(function(e){console.log("profileData:",e);const t=e.title,o=e.description;console.log("name:",t,"job:",o),y.setUserInfo({name:t,job:o}),j.updateUserInfo(e.title,e.description);const r=y.getUserInfo();console.log(r),C.closePopup()}));C.setEventListeners();const L=new n("#card__add-modal",(function(e){_.textContent="Adding...",j.createNewCard(e.title,e.url).then((e=>{B(e),L.closePopup(),D.resetForm()})).catch((e=>{console.error(e)})),setTimeout((()=>{_.textContent="Add"}),1e3)}));L.setEventListeners();const b=new class extends r{constructor(e){super({popupSelector:e}),this._popupImage=this._popupElement.querySelector(".modal__image"),this._popupImageText=this._popupElement.querySelector(".modal__image_heading")}openPopup(e){let{name:t,link:o}=e;console.log("Preview Class Working"),this._popupImage.src=o,this._popupImageText.textContent=t,this._popupImage.alt=t,super.openPopup()}}("#preview__modal");b.setEventListeners();const q=new n("#avatar__modal",I);q.setEventListeners();const j=new class{constructor(e){}getInitialCards(){return fetch("https://around-api.en.tripleten-services.com/v1/cards",{headers:{authorization:"4792ec92-cf1c-45a6-8740-0f5d63585faa"}}).then((e=>e.ok?(console.log(e.ok),e.json()):(console.log("Error"),Promise.reject(`getInitialCards method Error: ${e.status}`)))).catch((e=>console.error(e)))}getUserInfo(){return fetch("https://around-api.en.tripleten-services.com/v1/users/me",{headers:{authorization:"4792ec92-cf1c-45a6-8740-0f5d63585faa"}}).then((e=>e.ok?e.json():(console.log("Error"),Promise.reject(`getUserInfo method Error: ${e.status}`)))).catch((e=>console.error(e)))}getUserAndCards(){return Promise.all([this.getUserInfo(),this.getInitialCards(),this.updateProfilePic()]).then((e=>{let[t,o]=e;return console.log("Getting User and Card Data..."),console.log([t,o]),{userInfo:t,cards:o}})).catch((e=>{console.error(`getUserAndCards Method Error: ${e}`)}))}updateProfilePic(e){return console.log(e),fetch("https://around-api.en.tripleten-services.com/v1/users/me/avatar",{method:"PATCH",headers:{authorization:"4792ec92-cf1c-45a6-8740-0f5d63585faa","Content-Type":"application/json"},body:JSON.stringify({avatar:e})}).then((e=>e.ok?(console.log(e),console.log("Profile Picture Updating"),e.json()):(console.log("Can't update Profile Picture"),Promise.reject(`Error: ${e.status}`)))).catch((e=>{console.error(e)}))}updateUserInfo(e,t){return fetch("https://around-api.en.tripleten-services.com/v1/users/me",{method:"PATCH",headers:{authorization:"4792ec92-cf1c-45a6-8740-0f5d63585faa","Content-type":"application/json"},body:JSON.stringify({name:e,about:t})}).then((e=>e.ok?(console.log(e),e.json()):(console.log("ERROR"),Promise.reject(`Promise Rejected: ${e.status}`)))).catch((e=>{console.error(e)}))}createNewCard(e,t){return fetch("https://around-api.en.tripleten-services.com/v1/cards",{method:"POST",headers:{authorization:"4792ec92-cf1c-45a6-8740-0f5d63585faa","Content-type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((e=>e.ok?(console.log("Card Added!"),console.log(e),e.json()):(console.log("ERROR"),Promise.reject(`Promise Rejected: ${e.status}`)))).catch((e=>{console.error(e)}))}deleteCard(e){return fetch(`https://around-api.en.tripleten-services.com/v1/cards/${e}`,{method:"DELETE",headers:{authorization:"4792ec92-cf1c-45a6-8740-0f5d63585faa","Content-type":"application/json"}}).then((e=>e.ok?(console.log("Deleting card"),e.json()):(console.log("Trouble deleting card"),Promise.reject(`Card Deletion Error: ${e.status}`)))).catch((e=>{console.error(e)}))}cardLike(e){return fetch(`https://around-api.en.tripleten-services.com/v1/cards/${e}/likes`,{method:"PUT",headers:{authorization:"4792ec92-cf1c-45a6-8740-0f5d63585faa"}}).then((e=>e.ok?(console.log("response ok: "+e.status),e.json()):(console.log("Unable to Like"),Promise.reject(`Like Error:  + ${e.status}`)))).catch((e=>{console.log(e)}))}cardUnlike(e){return fetch(`https://around-api.en.tripleten-services.com/v1/cards/${e}/likes`,{method:"DELETE",headers:{authorization:"4792ec92-cf1c-45a6-8740-0f5d63585faa"}}).then((e=>e.ok?(console.log(`Unlike Status: ${e.status}`),e.json()):(console.log("Unable To Unlike"),Promise.reject(`Error: ${e.status}`)))).catch((e=>{console.error(e)}))}}({baseURL:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"4792ec92-cf1c-45a6-8740-0f5d63585faa","Content-type":"application/json"}});function w(e,t){b.openPopup({name:e,link:t})}function I(e){const t=e.url;k.textContent="Saving...",j.updateProfilePic(t).then((()=>{y.setUserAvatar(t)})).catch((e=>{console.error(`Error caught in HandleAvatarUpdate function ${e}`)})),setTimeout((()=>{k.textContent="Save"}),1e3),q.closePopup()}function P(){console.log("Closing Delete Modal"),m.classList.remove("modal_open")}function U(e){e._like?e._like&&j.cardUnlike(e._id).then((()=>{e.updateLike(!1)})).catch((e=>{console.error(e)})):(console.log(e._like),j.cardLike(e._id).then((()=>{e.updateLike(!0)})).catch((e=>{console.error(e)})))}function x(e){console.log(e),console.log("Delete Modal Opening"),m.classList.add("modal_open"),f.addEventListener("click",(()=>{P()})),h.addEventListener("click",(()=>{h.textContent="Deleting...",j.deleteCard(e._id).then((()=>{e._handleCardDelete(e._id),P()})).catch((e=>{console.error(e)})),setTimeout((()=>{h.textContent="Delete"}),1e3)}))}function B(e){const o=function(e){return new t(e,"#card-template",w,x,U).viewCard()}(e);S.addItem(o)}s.addEventListener("click",(()=>{const e=y.getUserInfo();i.value=e.name,c.value=e.job,C.openPopup()})),v.addEventListener("click",(()=>{g.classList.add("modal_open")})),E.addEventListener("click",(()=>{g.classList.remove("modal_open")})),k.addEventListener("submit",(e=>(console.log(k),I()))),u.addEventListener("click",(()=>L.openPopup())),console.log(_),j.getUserAndCards().then((e=>{let{userInfo:t,cards:o}=e;console.log({userInfo:t,cards:o}),y.setUserInfo({name:t.name,job:t.about}),y.setUserAvatar(t.avatar),S.renderItems(o)})).catch((e=>{console.error(e)})),new o(e,l).enableValidation();const D=new o(e,p);D.enableValidation(),new o(e,g).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVM1SixLQUNuQ3NGLEVBQXdCSixNQUFRMEUsRUFBUzVDLElBQ3pDUSxFQUFhdEQsV0FBVyxJQUsxQjhCLEVBQWlCdEUsaUJBQWlCLFNBQVMsS0F0QnpDcUUsRUFBWXBFLFVBQVVDLElBQUksYUFzQjRDLElBQ3hFcUUsRUFBdUJ2RSxpQkFBaUIsU0FBUyxLQW5CL0NxRSxFQUFZcEUsVUFBVUksT0FBTyxhQXFCL0IsSUFDQW1FLEVBQXdCeEUsaUJBQWlCLFVBQVdtSixJQUNsRGhKLFFBQVFDLElBQUlvRSxHQUNMNEMsT0FJVHJELEVBQWlCL0QsaUJBQWlCLFNBQVMsSUFBTXFHLEVBQWE3RCxjQUM5RHJDLFFBQVFDLElBQUk2RCxHQU1aaUMsRUFDRzZCLGtCQUNBdEIsTUFBS3BFLElBQXlCLElBQXhCLFNBQUU2RixFQUFRLE1BQUVDLEdBQU85RixFQUN4QmxDLFFBQVFDLElBQUksQ0FBRThILFdBQVVDLFVBQ3hCOUMsRUFBS00sWUFBWSxDQUFFckgsS0FBTTRKLEVBQVM1SixLQUFNZ0gsSUFBSzRDLEVBQVNNLFFBQ3REbkQsRUFBS1EsY0FBY3FDLEVBQVMzQyxRQUM1QmQsRUFBUU0sWUFBWW9ELEVBQU0sSUFFM0J2QixPQUFPQyxJQUNOMUcsUUFBUTJHLE1BQU1ELEVBQUksSUFPRyxJQUFJckcsRUFBY2xELEVBQVF1RyxHQUNsQzlDLG1CQUlqQixNQUFNNEYsRUFBc0IsSUFBSW5HLEVBQWNsRCxFQUFRMEcsR0FDdEQyQyxFQUFvQjVGLG1CQUlJLElBQUlQLEVBQWNsRCxFQUFRK0csR0FDbEN0RCxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvY2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9mb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL3BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL3BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL3NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvdXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvcG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvYXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENyZWF0ZSBhbiBhcnJheSBvZiBvYmplY3RzXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcbiAgfSxcbl07XG5cbi8vQ29uZmlnIHNldHRpbmdzXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19wb3B1cF9fZm9ybVwiLCAvLyBVcGRhdGVkXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19wb3B1cF9faW5wdXRcIiwgLy8gVXBkYXRlZFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3BvcHVwX19idXR0b25cIiwgLy8gVXBkYXRlZFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19wb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsIC8vIFVwZGF0ZWRcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19wb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLCAvLyBVcGRhdGVkXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX3BvcHVwX19lcnJvcl92aXNpYmxlXCIsIC8vIFVwZGF0ZWRcbn07XG4iLCIvL0NsYXNzIGNyZWF0ZXMgY2FyZFxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGRhdGEsXG4gICAgY2FyZFNlbGVjdG9yLFxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXG4gICAgaGFuZGxlQ2FyZERlbGV0ZSxcbiAgICBoYW5kbGVDYXJkTGlrZVxuICApIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lOyAvL3NldCBjYXJkIG5hbWVcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rOyAvL3NldCBjYXJkIGltYWdlXG4gICAgdGhpcy5faWQgPSBkYXRhLl9pZDsgLy9zZXQgY2FyZCBpZFxuICAgIHRoaXMuX2xpa2UgPSBkYXRhLmlzTGlrZWQ7IC8vc2V0IGNhcmQgbGlrZSBzdGF0dXNcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7IC8vc2V0IGNhcmQgdGVtcGxhdGUgc2VsZWN0b3JcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcbiAgICB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlID0gaGFuZGxlQ2FyZERlbGV0ZTtcbiAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSA9IGhhbmRsZUNhcmRMaWtlO1xuICB9XG5cbiAgLy9tZXRob2RzXG4gIC8vTWV0aG9kIHRvIGdldCBjYXJkIHRlbXBsYXRlXG4gIHZpZXdDYXJkKCkge1xuICAgIC8vZ2V0IHRoZSBjYXJkIHRlbXBsYXRlXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlO1xuXG4gICAgdGhpcy5fY3JlYXRlQ2FyZCgpOyAvL2NhbGwgdGhpcy5fY3JlYXRlQ2FyZCgpIHRvIGNyZWF0ZSBjYXJkXG5cbiAgICAvL2NhbGwgc2V0IGV2ZW50IGxpc3RlbmVyc1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAvL3JldHVybiBjYXJkXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG5cbiAgLy9tZXRob2QgdG8gY3JlYXRlIGNhcmRcbiAgX2NyZWF0ZUNhcmQoKSB7XG4gICAgY29uc3QgY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7IC8vZ2V0IGltYWdlXG4gICAgY29uc3QgY2FyZFRpdGxlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7IC8vZ2V0IHRpdGxlXG5cbiAgICAvL3NldCBjYXJkIHZhbHVlc1xuICAgIGNhcmRJbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcbiAgICBjYXJkSW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XG4gICAgY2FyZFRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl91cGRhdGVMaWtlU3RhdHVzKCk7IC8vY2FsbCB0aGlzIHRvIHVwZGF0ZSBsaWtlIHN0YXR1c1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vZ2V0IGNhcmQgbGlrZSBidXR0b25cbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTsgLy9nZXQgY2FyZCBsaWtlIGJ1dHRvblxuICAgIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIC8vc2V0IGxpc3RlbmVyXG4gICAgICB0aGlzLl9oYW5kbGVDYXJkTGlrZSh0aGlzKTtcbiAgICB9KTtcbiAgICAvL2dldCBjYXJkIGRlbGV0ZSBidXR0b25cbiAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZVwiKTtcbiAgICBkZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmREZWxldGUodGhpcyk7XG4gICAgfSk7XG4gICAgLy9vdmVybGF5IGxpc3RlbmVyXG4gICAgY29uc3QgY2FyZEltYWdlRWxlbWVudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgY2FyZEltYWdlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8vbWV0aG9kIHRvIGhhbmRsZSBjYXJkIGxpa2UgYW5kIHVubGlrZSBpbiBET01cbiAgX3VwZGF0ZUxpa2VTdGF0dXMoKSB7XG4gICAgaWYgKHRoaXMuX2xpa2UpIHtcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAgIC5jbGFzc0xpc3QuYWRkKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgICAgY29uc29sZS5sb2coXCJMaWtlZCFcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NhcmRFbGVtZW50XG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpXG4gICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIC8vbWV0aG9kIHRvIGhhbmRsZSBjYXJkIGRlbGV0aW9uIGZyb20gRE9NXG4gIF9oYW5kbGVDYXJkRGVsZXRlKCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xuICAgIC8qIGNvbnNvbGUubG9nKFwiREVMRVRFRCFcIik7ICovXG4gIH1cblxuICB1cGRhdGVMaWtlKExpa2VkKSB7XG4gICAgdGhpcy5fbGlrZSA9IExpa2VkO1xuICAgIHRoaXMuX3VwZGF0ZUxpa2VTdGF0dXMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybSkge1xuICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZzsgLy8gU2V0IGNvbmZpZyBwcm9wZXJ0aWVzXG4gICAgdGhpcy5fZm9ybSA9IGZvcm07IC8vIFNldCBmb3JtXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFtcbiAgICAgIC4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvciksIC8vIEdldCBhbGwgaW5wdXRFbGVtZW50cyBmcm9tIHBhc3NlZC1pbiBmb3JtXG4gICAgXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApOyAvLyBHZXQgc3VibWl0IGJ1dHRvbiBmcm9tIHBhc3NlZC1pbiBmb3JtXG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIC8vIFB1YmxpYyBNZXRob2QgdGhhdCB3aWxsIGJlIGNhbGxlZFxuXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgUGFnZSBSZWxvYWRcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpOyAvLyBDYWxsIHRoaXMgbWV0aG9kIHRvIGJlZ2luIGNoZWNraW5nIHZhbGlkaXR5IG9mIGlucHV0c1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7IC8vIFNldCBidXR0b24gc3RhdGUgZnJvbSBiZWdpbm5pbmdcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRFdmVudChpbnB1dEVsKTsgLy8gUGFzcyBpbnB1dEVsIHRvIGhhbmRsZUlucHV0RXZlbnRcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gTWV0aG9kIHRvIENoZWNrIENoYW5nZXMgdG8gaW5wdXQgZmllbGRzIGFuZCBDYWxsIGNoZWNrVmFsaWRpdHlcbiAgX2hhbmRsZUlucHV0RXZlbnQoaW5wdXRFbCkge1xuICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTsgLy8gQ2hlY2sgdmFsaWRpdHkgb2YgaW5wdXRFbFxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICAvLyBNZXRob2QgdG8gQ2hlY2sgaWYgaW5wdXRzIGFyZSB2YWxpZFxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpOyAvLyBTaG93IGlucHV0RWwgZXJyb3JcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7IC8vIEhpZGUgaW5wdXRFbCBlcnJvclxuICAgIH1cbiAgfVxuXG4gIC8vIE1ldGhvZCB0byBzaG93IElucHV0IGVycm9yXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8vIE1ldGhvZCB0byBIaWRlIElucHV0IEVycm9yXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCIgXCI7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gIH1cblxuICAvL21ldGhvZCB0byBjaGVjayBpZiBmb3JtIGlzIHZhbGlkXG4gIF9jaGVja0Zvcm1WYWxpZGl0eSgpIHtcbiAgICBjb25zdCBpc0Zvcm1WYWxpZCA9IHRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoXG4gICAgICAoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkIC8vZm9yIGV2ZXJ5IGlucHV0LCBjaGVjayBpZiB2YWxpZFxuICAgICk7XG4gICAgcmV0dXJuIGlzRm9ybVZhbGlkOyAvL3JldHVybiBpc0Zvcm1WYWxpZCB0byB1c2UgaW4gVG9nZ2xlQnV0dG9uU3RhdGVcbiAgfVxuXG4gIC8vIE1ldGhvZCB0byBDaGFuZ2UgQnV0dG9uIFN0YXRlXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBjb25zdCBpc0Zvcm1WYWxpZCA9IHRoaXMuX2NoZWNrRm9ybVZhbGlkaXR5KCk7IC8vcmVhc3NpZ24gaXNGb3JtVmFsaWQgdG8gdGhlIHZhbHVlIG9mIENoZWNrRm9ybVZhbGlkaXR5XG4gICAgaWYgKCFpc0Zvcm1WYWxpZCkge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy9NZXRob2QgdG8gcmVzZXQgZm9ybVxuICByZXNldEZvcm0oKSB7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpOyAvL3Jlc2V0IGZvcm1cbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH0pO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7IC8vUmVzZXQgQnV0dG9uXG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICB9XG5cbiAgb3BlblBvcHVwKCkge1xuICAgIGNvbnNvbGUubG9nKFwib3BlbmluZyB3aXRoIGNsYXNzXCIpO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlblwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZVBvcHVwKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvL2hhbmRsZSBjbG9zaW5nIG1vZGFsIGJ5IGNsaWNraW5nIGNsb3NlIGJ1dHRvblxuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhcIkNsb3NlZCB3aXRoIENsb3NlIGJ1dHRvblwiKTtcbiAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xuICAgIH0pO1xuICAgIC8vaGFuZGxlcyBjbG9zaW5nIGJ5IGNsaWNraW5nIG92ZXJsYXlcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJDbG9zZWQgQnkgT3ZlcmxheSBDbGlja1wiKTtcbiAgICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XG4gICAgLy91c2UgYSBuYW1lZCBmdW5jdGlvbiBleHByZXNzaW9uIHRvIGFsbG93IHJlbW92ZUV2ZW50TGlzdGVuZXIgdG8gcmVmZXJlbmNlIHRoZSBtZXRob2RcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgY29uc29sZS5sb2coXCJFU0NcIik7XG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcbiAgICB9XG4gIH07XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXAuanNcIjtcbi8vaGFuZGxlcyBwcm9maWxlIGFuZCBhZGQgY2FyZCBmb3Jtc1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9mb3JtSW5wdXRzID0gW1xuICAgICAgLi4udGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm0taW5wdXRcIiksIC8vY29sbGVjdCBhbGwgZm9ybSBpbnB1dHNcbiAgICBdO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIGNvbnN0IGlucHV0c09iaiA9IHt9OyAvL2NyZWF0ZSBlbXB0eSBvYmplY3RcbiAgICB0aGlzLl9mb3JtSW5wdXRzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIC8vZm9yRWFjaCBpbnB1dEVsXG4gICAgICBpbnB1dHNPYmpbaW5wdXRFbC5uYW1lXSA9IGlucHV0RWwudmFsdWU7IC8vdXNlIGFycmF5IGJyYWNrZXRzIHRvIHNldCBpbnB1dEVsIG5hbWUgYW5kIHZhbHVlIGluc2lkZSBvYmplY3RcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRzT2JqO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy9tb2RpZnkgdG8gd29yayB3aXRoIG1vZGFscyB3aXRob3V0IGlucHV0c1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7IC8vcHJldmVudCBwYWdlIHJlZnJlc2hcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7IC8vY2FsbCBoYW5kbGVGb3JtU3VibWl0XG4gICAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTsgLy9yZXNldCBhZnRlciBzdWJtaXNzaW9uIGFuZCBub3Qgb24gY2xvc2VcbiAgICB9KTtcbiAgfVxufVxuIiwiLy9JbXBvcnRzXG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgY29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvY2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvZm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvc2VjdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL3VzZXJJbmZvLmpzXCI7XG5cbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL3BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9wb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9hcGkuanNcIjtcblxuLy8gQWRkIE1vZGFsc1xuLy8gRGVjbGFyZSBQcm9maWxlIE1vZGFsIFZhcmlhYmxlc1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX19lZGl0LW1vZGFsXCIpO1xuY29uc3QgcHJvZmlsZU1vZGFsQ2xvc2VCdXR0b24gPSBwcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlX190aXRsZS1pbnB1dFwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZV9fZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IHByb2ZpbGVNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgcHJvZmlsZU1vZGFsT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZV9fZWRpdC1tb2RhbFwiKTtcblxuY29uc3QgY2FyZFRlbXBsYXRlID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5jb25zdCBjYXJkTGlzdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG4vLyBBZGQgQ2FyZCBNb2RhbFxuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkX19hZGQtbW9kYWxcIik7XG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG5jb25zdCBhZGRDYXJkRm9ybUVsZW1lbnQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZF9fdGl0bGUtaW5wdXRcIik7XG5jb25zdCBjYXJkVVJMSW5wdXQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNjYXJkX19kZXNjcmlwdGlvbi1pbnB1dFwiKTtcbmNvbnN0IGFkZE5ld0NhcmRTdWJtaXRCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuXG4vLyBNb2RhbCBPdmVybGF5XG5jb25zdCBhZGRDYXJkTW9kYWxPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkX19hZGQtbW9kYWxcIik7XG5cbi8vIFByZXZpZXcgSW1hZ2UgTW9kYWxcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3X19tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsQ2xvc2VCdXR0b24gPVxuICBwcmV2aWV3SW1hZ2VNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbmNvbnN0IHByZXZpZXdJbWFnZU1vZGFsT3ZlcmxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlld19fbW9kYWxcIik7XG5cbi8vRGVsZXRlIE1vZGFsXG5jb25zdCBkZWxldGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGVsZXRlX19tb2RhbFwiKTtcbmNvbnN0IGRlbGV0ZU1vZGFsQnV0dG9uID0gZGVsZXRlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuY29uc3QgZGVsZXRlTW9kYWxDbG9zZUJ1dHRvbiA9IGRlbGV0ZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuXG4vL0F2YXRhciBNb2RhbFxuY29uc3QgYXZhdGFyTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2F2YXRhcl9fbW9kYWxcIik7XG5jb25zdCBhdmF0YXJFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXItZWRpdFwiKTtcbmNvbnN0IGF2YXRhck1vZGFsQ2xvc2VCdXR0b24gPSBhdmF0YXJNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcbmNvbnN0IGF2YXRhck1vZGFsU3VibWl0QnV0dG9uID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fYnV0dG9uXCIpO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIENMQVNTRVMgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vL0luc3RhbnRpYXRlIFNlY3Rpb24gQ2xhc3NcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAgeyBpdGVtOiBpbml0aWFsQ2FyZHMsIHJlbmRlcmVyOiByZW5kZXJDYXJkIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG4vLy8vSW5zdGFudGlhdGUgVXNlckluZm9cbmNvbnN0IHVzZXIgPSBuZXcgVXNlckluZm8oe1xuICBuYW1lOiBcIi5wcm9maWxlX190aXRsZVwiLFxuICBqb2I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGF2YXRhcjogXCIucHJvZmlsZV9faW1hZ2VcIixcbn0pO1xuLy8vL1xuLy9JbnN0YW50aWF0ZSBwb3B1cFdpdGhGb3JtIGZvciBQcm9maWxlXG5jb25zdCBwcm9maWxlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjcHJvZmlsZV9fZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVQcm9maWxlTW9kYWxTdWJtaXRcbik7XG5wcm9maWxlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9JbnN0YW50aWF0ZSBwb3B1cFdpdGhGb3JtIGZvciBhZGRDYXJkXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIjY2FyZF9fYWRkLW1vZGFsXCIsXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XG4pO1xubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vLy8vLy9QcmV2aWV3IEltYWdlIHBvcHVwIGNsYXNzXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXdfX21vZGFsXCIpO1xucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBhdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI2F2YXRhcl9fbW9kYWxcIiwgaGFuZGxlQXZhdGFyVXBkYXRlKTtcbmF2YXRhclBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVVJMOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjQ3OTJlYzkyLWNmMWMtNDVhNi04NzQwLTBmNWQ2MzU4NWZhYVwiLFxuICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEZVTkNUSU9OUyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gaGFuZGxlSW1hZ2VDbGljayhuYW1lLCBsaW5rKSB7XG4gIHBvcHVwSW1hZ2Uub3BlblBvcHVwKHsgbmFtZSwgbGluayB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZU1vZGFsU3VibWl0KHByb2ZpbGVEYXRhKSB7XG4gIGNvbnNvbGUubG9nKFwicHJvZmlsZURhdGE6XCIsIHByb2ZpbGVEYXRhKTtcbiAgY29uc3QgbmFtZSA9IHByb2ZpbGVEYXRhLnRpdGxlOyAvL3NldCBuYW1lIHZhciB0byB3b3JrIHdpdGggdXNlckluZm8gY2xhc3NcbiAgY29uc3Qgam9iID0gcHJvZmlsZURhdGEuZGVzY3JpcHRpb247IC8vc2V0IGpvYiB2YXIgdG8gd29yayB3aXRoIHVzZXJJbmZvIGNsYXNzXG4gIGNvbnNvbGUubG9nKFwibmFtZTpcIiwgbmFtZSwgXCJqb2I6XCIsIGpvYik7IC8vZGVidWcgbG9nXG4gIHVzZXIuc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSk7IC8vc2V0IHVzZXIgaW5mb3JtYXRpb25cbiAgYXBpLnVwZGF0ZVVzZXJJbmZvKHByb2ZpbGVEYXRhLnRpdGxlLCBwcm9maWxlRGF0YS5kZXNjcmlwdGlvbik7XG4gIGNvbnN0IHVwZGF0ZWRVc2VySW5mbyA9IHVzZXIuZ2V0VXNlckluZm8oKTsgLy9nZXQgdXBkYXRlZCBpbmZvcm1hdGlvbiBhbmQgc3RvcmUgaW4gYSB2YXJcbiAgY29uc29sZS5sb2codXBkYXRlZFVzZXJJbmZvKTsgLy8gZGVidWcgbG9nXG4gIHByb2ZpbGVQb3B1cC5jbG9zZVBvcHVwKCk7IC8vY2xvc2UgcG9wdXBcbn1cblxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyVXBkYXRlKGxpbmspIHtcbiAgY29uc3QgdXJsID0gbGluay51cmw7IC8vZXh0cmFjdCB1cmwgZnJvbSBsaW5rIG9iamVjdCBhbmQgc2V0IGl0IHRvIHVybCB2YWx1ZVxuXG4gIGF2YXRhck1vZGFsU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcblxuICBhcGlcbiAgICAudXBkYXRlUHJvZmlsZVBpYyh1cmwpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgdXNlci5zZXRVc2VyQXZhdGFyKHVybCk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgY2F1Z2h0IGluIEhhbmRsZUF2YXRhclVwZGF0ZSBmdW5jdGlvbiAke2Vycn1gKTtcbiAgICB9KTtcblxuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBhdmF0YXJNb2RhbFN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICB9LCAxMDAwKTtcbiAgYXZhdGFyUG9wdXAuY2xvc2VQb3B1cCgpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChuZXdDYXJkRGF0YSkge1xuICBhZGROZXdDYXJkU3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJBZGRpbmcuLi5cIjtcbiAgYXBpXG4gICAgLmNyZWF0ZU5ld0NhcmQobmV3Q2FyZERhdGEudGl0bGUsIG5ld0NhcmREYXRhLnVybClcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAvKiBjb25zb2xlLmxvZyhyZXMpOyAqL1xuICAgICAgcmVuZGVyQ2FyZChyZXMpO1xuICAgICAgbmV3Q2FyZFBvcHVwLmNsb3NlUG9wdXAoKTsgLy9jbG9zZSBwb3B1cFxuICAgICAgYWRkTmV3Q2FyZFZhbGlkYXRvci5yZXNldEZvcm0oKTsgLy9yZXNldCBmb3JtIGFuZCBkaXNhYmxlIHN1Ym1pdCBidXR0b25cbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG5cbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgYWRkTmV3Q2FyZFN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiQWRkXCI7XG4gIH0sIDEwMDApO1xufVxuXG5mdW5jdGlvbiBvcGVuRGVsZXRlTW9kYWwoKSB7XG4gIGNvbnNvbGUubG9nKFwiRGVsZXRlIE1vZGFsIE9wZW5pbmdcIik7XG4gIGRlbGV0ZU1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuXCIpO1xufVxuXG5mdW5jdGlvbiBjbG9zZURlbGV0ZU1vZGFsKCkge1xuICBjb25zb2xlLmxvZyhcIkNsb3NpbmcgRGVsZXRlIE1vZGFsXCIpO1xuICBkZWxldGVNb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZExpa2VzKGNhcmREYXRhKSB7XG4gIC8qICAgY29uc29sZS5sb2coY2FyZERhdGEpO1xuICBjb25zb2xlLmxvZyhjYXJkRGF0YS5fbGlrZSk7ICovXG5cbiAgaWYgKCFjYXJkRGF0YS5fbGlrZSkge1xuICAgIC8vaWYgbm90IGxpa2VkXG4gICAgY29uc29sZS5sb2coY2FyZERhdGEuX2xpa2UpO1xuICAgIGFwaVxuICAgICAgLmNhcmRMaWtlKGNhcmREYXRhLl9pZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgLyogICAgY29uc29sZS5sb2coYENhcmQgJHtjYXJkRGF0YS5faWR9IGxpa2VkYCk7ICovXG4gICAgICAgIGNhcmREYXRhLnVwZGF0ZUxpa2UodHJ1ZSk7IC8vY2FsbCBjYXJkLmpzIGxpa2UgbWV0aG9kXG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSk7XG4gIH0gZWxzZSBpZiAoY2FyZERhdGEuX2xpa2UpIHtcbiAgICAvL2lmIGxpa2VkXG4gICAgYXBpXG4gICAgICAuY2FyZFVubGlrZShjYXJkRGF0YS5faWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmREYXRhLnVwZGF0ZUxpa2UoZmFsc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmREZWxldGUoY2FyZERhdGEpIHtcbiAgLy9wYXNzIGluIGNhcmQgZGF0YVxuICBjb25zb2xlLmxvZyhjYXJkRGF0YSk7XG5cbiAgb3BlbkRlbGV0ZU1vZGFsKCk7IC8vb3BlbiBkZWxldGUgbW9kYWxcbiAgLy9jbG9zZSBidXR0b24gZnVuY3Rpb25hbGl0eVxuICBkZWxldGVNb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2xvc2VEZWxldGVNb2RhbCgpO1xuICB9KTtcblxuICBkZWxldGVNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGRlbGV0ZU1vZGFsQnV0dG9uLnRleHRDb250ZW50ID0gXCJEZWxldGluZy4uLlwiO1xuICAgIGFwaVxuICAgICAgLmRlbGV0ZUNhcmQoY2FyZERhdGEuX2lkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkRGF0YS5faGFuZGxlQ2FyZERlbGV0ZShjYXJkRGF0YS5faWQpOyAvL2NhbGwgY2FyZC5qc1xuICAgICAgICBjbG9zZURlbGV0ZU1vZGFsKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBkZWxldGVNb2RhbEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCI7XG4gICAgfSwgMTAwMCk7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIC8vZnVuY3Rpb24gdG8gY3JlYXRlIG5ldyBjYXJkXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkRGF0YSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVDYXJkRGVsZXRlLFxuICAgIGhhbmRsZUNhcmRMaWtlc1xuICApOyAvL2luc3RhbnRpYXRlIGNhcmQgY2xhc3NcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLnZpZXdDYXJkKCk7IC8vY2FsbCB2aWV3Q2FyZCBvZiBjYXJkIGNsYXNzIHRvIGNyZWF0ZVxuICByZXR1cm4gY2FyZEVsZW1lbnQ7IC8vcmV0dXJuIGNhcmRcbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChjYXJkRGF0YSkge1xuICAvL2Z1bmN0aW9uIHRvIHJlbmRlciBuZXcgY2FyZCB0byBwYWdlXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7IC8vY3JlYXRlIGNhcmQ7XG4gIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhck1vZGFsT3BlbigpIHtcbiAgYXZhdGFyTW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5cIik7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUF2YXRhck1vZGFsQ2xvc2UoKSB7XG4gIGF2YXRhck1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuXCIpO1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRVZFTlQgTElTVEVORVJTIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8qIGNhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY29uc29sZS5sb2coXCJEZWxldGVcIik7XG59KTsgKi9cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gUHJvZmlsZSBNb2RhbCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHVzZXJJbmZvID0gdXNlci5nZXRVc2VySW5mbygpOyAvL2dldCB1c2VyIGluZm9cbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VySW5mby5uYW1lOyAvL3ByZSBzZXQgbmFtZVxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJJbmZvLmpvYjsgLy9wcmUgc2V0IGpvYlxuICBwcm9maWxlUG9wdXAub3BlblBvcHVwKCk7IC8vb3BlbiBwb3B1cFxufSk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuYXZhdGFyRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gaGFuZGxlQXZhdGFyTW9kYWxPcGVuKCkpO1xuYXZhdGFyTW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgaGFuZGxlQXZhdGFyTW9kYWxDbG9zZSgpXG4pO1xuYXZhdGFyTW9kYWxTdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZlbnQpID0+IHtcbiAgY29uc29sZS5sb2coYXZhdGFyTW9kYWxTdWJtaXRCdXR0b24pO1xuICByZXR1cm4gaGFuZGxlQXZhdGFyVXBkYXRlKCk7XG59KTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIEFkZCBOZXcgQ2FyZCBNb2RhbCAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IG5ld0NhcmRQb3B1cC5vcGVuUG9wdXAoKSk7XG5jb25zb2xlLmxvZyhhZGROZXdDYXJkU3VibWl0QnV0dG9uKTtcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBSRU5ERVJJTkcgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vR2V0IGluaXRpYWwgVXNlckluZm8gYW5kIENhcmRzXG5cbmFwaVxuICAuZ2V0VXNlckFuZENhcmRzKClcbiAgLnRoZW4oKHsgdXNlckluZm8sIGNhcmRzIH0pID0+IHtcbiAgICBjb25zb2xlLmxvZyh7IHVzZXJJbmZvLCBjYXJkcyB9KTtcbiAgICB1c2VyLnNldFVzZXJJbmZvKHsgbmFtZTogdXNlckluZm8ubmFtZSwgam9iOiB1c2VySW5mby5hYm91dCB9KTsgLy9yZW5kZXIgcHJvZmlsZSBpbmZvXG4gICAgdXNlci5zZXRVc2VyQXZhdGFyKHVzZXJJbmZvLmF2YXRhcik7IC8vcmVuZGVyIHByb2ZpbGUgcGljXG4gICAgc2VjdGlvbi5yZW5kZXJJdGVtcyhjYXJkcyk7IC8vcmVuZGVyIGNhcmRzIGZyb20gc2VydmVyXG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gVkFMSURBVElPTiAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8vUHJvZmlsZSBNb2RhbCBWYWxpZGF0aW9uXG4vL05ldyBJbnN0YW5jZSBvZiBGb3JtVmFsaWRhdG9yIENsYXNzXG5jb25zdCBwcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRWRpdEZvcm0pOyAvL1Bhc3MgaW4gUHJvZmlsZSBFZGl0IGZvcm0gdG8gYmUgdmFsaWRhdGVkIGFuZCBjb25maWcgY2xhc3Nlc1xucHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7IC8vQ2FsbCBlbmFibGVWYWxpZGF0aW9uXG5cbi8vQWRkTmV3Q2FyZCBWYWxkYXRpb25cbi8vTmV3IEluc3RhbmNlIG9mIEZvcm1WYWxpZGF0b3IgQ2xhc3NcbmNvbnN0IGFkZE5ld0NhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGFkZENhcmRGb3JtRWxlbWVudCk7IC8vUGFzcyBpblxuYWRkTmV3Q2FyZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLy9OZXcgUGhvdG8gVmFsaWRhdGlvblxuY29uc3QgYXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhdmF0YXJNb2RhbCk7XG5hdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbSwgcmVuZGVyZXIgfSwgY29udGFpbmVyKSB7XG4gICAgLyogICB0aGlzLl9pdGVtID0gaXRlbTsgKi9cbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XG4gICAgLy9tZXRob2Qgb2YgcmVuZGVyIGl0ZW1zIHRvIHBhZ2VcbiAgICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgIC8vbWV0aG9kIHRvIGFkZCBvbmUgaXRlbVxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyB1c2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgam9iLCBhdmF0YXIgfSkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWUpO1xuICAgIHRoaXMuX2pvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iKTtcbiAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhcik7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iLnRleHRDb250ZW50LFxuICAgIH07XG4gIH0gLy9yZXR1cm5zIG9iaiB3aXRoIGluZm8gZW50ZXJlZCBieSB1c2VyXG5cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xuICAgIC8vZXhwZWN0cyBvYmogYW5kIHNldHMgZmllbGRzIHdpdGggcmV0cmlldmVkIGluZm9cbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9qb2IudGV4dENvbnRlbnQgPSBqb2I7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKGxpbmspIHtcbiAgICB0aGlzLl9hdmF0YXIuc3JjID0gbGluaztcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL3BvcHVwXCI7XG5cbi8vVGhpcyBjbGFzcyBoYW5kbGVzIHByZXZpZXcgbW9kYWwgZnVuY3Rpb25hbGl0eVxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7IC8vY2FsbCBwYXJlbnQgY29uc3RydWN0b3IgZm9yIGFjY2VzcyB0byBwb3B1cFNlbGVjdG9yXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlVGV4dCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX2ltYWdlX2hlYWRpbmdcIlxuICAgICk7XG4gIH1cblxuICBvcGVuUG9wdXAoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICAvL3NldCBpbWFnZSBzcmNcbiAgICBjb25zb2xlLmxvZyhcIlByZXZpZXcgQ2xhc3MgV29ya2luZ1wiKTtcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fcG9wdXBJbWFnZVRleHQudGV4dENvbnRlbnQgPSBuYW1lOyAvL3NldCBpbWFnZSB0ZXh0XG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lOyAvL3NldCBpbWFnZSBhbHRcbiAgICBzdXBlci5vcGVuUG9wdXAoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge31cblxuICAvL21ldGhvZHNcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL2NhcmRzXCIsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCI0NzkyZWM5Mi1jZjFjLTQ1YTYtODc0MC0wZjVkNjM1ODVmYWFcIixcbiAgICAgIH0sXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIC8vY2hlY2sgZm9yIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMub2spO1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vY2hlY2sgZm9yIHVuc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yXCIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYGdldEluaXRpYWxDYXJkcyBtZXRob2QgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pIC8vcHJvY2VzcyBlcnJvcnNcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvdXNlcnMvbWVcIiwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjQ3OTJlYzkyLWNmMWMtNDVhNi04NzQwLTBmNWQ2MzU4NWZhYVwiLFxuICAgICAgfSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgLyogY29uc29sZS5sb2cocmVzKTsgICovIC8vY29uc29sZSBsb2cgcmVzcG9uc2UgZm9yIGRlYnVnZ2luZ1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpOyAvL3RoZW4gcmV0dXJuIHBhcnNlZCByZXNwb25zZVxuICAgICAgICB9XG4gICAgICAgIC8vY2hlY2sgZm9yIHVuc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yXCIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYGdldFVzZXJJbmZvIG1ldGhvZCBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICB9XG5cbiAgZ2V0VXNlckFuZENhcmRzKCkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICB0aGlzLmdldFVzZXJJbmZvKCksXG4gICAgICB0aGlzLmdldEluaXRpYWxDYXJkcygpLFxuICAgICAgdGhpcy51cGRhdGVQcm9maWxlUGljKCksXG4gICAgXSkgLy9yZXR1cm4gUHJvbWlzZSBhcnJheSBvZiBtZXRob2QgY2FsbHNcbiAgICAgIC50aGVuKChbdXNlckluZm8sIGNhcmRzXSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkdldHRpbmcgVXNlciBhbmQgQ2FyZCBEYXRhLi4uXCIpO1xuICAgICAgICBjb25zb2xlLmxvZyhbdXNlckluZm8sIGNhcmRzXSk7XG4gICAgICAgIHJldHVybiB7IHVzZXJJbmZvLCBjYXJkcyB9OyAvL3JldHVybiBvYmplY3QgY29udGFpbmluZyB1c2VySW5mbyBhbmQgQ2FyZCBEYXRhXG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgZ2V0VXNlckFuZENhcmRzIE1ldGhvZCBFcnJvcjogJHtlcnJ9YCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZVByb2ZpbGVQaWMobGluaykge1xuICAgIGNvbnNvbGUubG9nKGxpbmspO1xuICAgIHJldHVybiBmZXRjaChcbiAgICAgIFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvdXNlcnMvbWUvYXZhdGFyXCIsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCI0NzkyZWM5Mi1jZjFjLTQ1YTYtODc0MC0wZjVkNjM1ODVmYWFcIixcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIGF2YXRhcjogbGluayxcbiAgICAgICAgfSksXG4gICAgICB9XG4gICAgKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlByb2ZpbGUgUGljdHVyZSBVcGRhdGluZ1wiKTtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvL2lmIHVuc3VjY2Vzc2Z1bFxuICAgICAgICBjb25zb2xlLmxvZyhcIkNhbid0IHVwZGF0ZSBQcm9maWxlIFBpY3R1cmVcIik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZVVzZXJJbmZvKG5hbWUsIGFib3V0KSB7XG4gICAgLy9wYXNzIGluIG5hbWUgYW5kIGFib3V0XG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvdXNlcnMvbWVcIiwge1xuICAgICAgLy9tYWtlIHJlcXVlc3QgdG8gdXBkYXRlIHNlcnZlclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IFwiNDc5MmVjOTItY2YxYy00NWE2LTg3NDAtMGY1ZDYzNTg1ZmFhXCIsXG4gICAgICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgLy9zdHJpbmdpZnkgb2JqZWN0IGNvbnRhaW5pbmcgdXNlciBkYXRhXG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGFib3V0OiBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpO1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1JcIik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgUHJvbWlzZSBSZWplY3RlZDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICB9XG4gIC8vbWV0aG9kIHRvIHNlbmQgYSBuZXcgY2FyZCB0byB0aGUgc2VydmVyXG4gIGNyZWF0ZU5ld0NhcmQobmFtZSwgbGluaykge1xuICAgIC8vcGFzcyBpbiBuYW1lIGFuZCBsaW5rXG4gICAgcmV0dXJuIGZldGNoKFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHNcIiwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCI0NzkyZWM5Mi1jZjFjLTQ1YTYtODc0MC0wZjVkNjM1ODVmYWFcIixcbiAgICAgICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAvL3N0cmluZ2lmeSBqc29uIG9ialxuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBsaW5rOiBsaW5rLFxuICAgICAgfSksXG4gICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2FyZCBBZGRlZCFcIik7XG4gICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTsgLy9yZXR1cm4gcmVzcG9uc2Ugb2JqIGFzIGpzb24gZGF0YVxuICAgICAgICB9XG4gICAgICAgIC8vaWYgdW5zdWNjZXNzZnVsXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRVJST1JcIik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgUHJvbWlzZSBSZWplY3RlZDogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy9tZXRob2QgdG8gZGVsZXRlIGNhcmQgZnJvbSBzZXJ2ZXJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHMvJHtjYXJkSWR9YCwgLy9maWxsIGNhcmRJRCBpbiB3aXRoIHBhcmFtZXRlclxuICAgICAge1xuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiBcIjQ3OTJlYzkyLWNmMWMtNDVhNi04NzQwLTBmNWQ2MzU4NWZhYVwiLFxuICAgICAgICAgIFwiQ29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgfVxuICAgIClcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcy5vaykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGVsZXRpbmcgY2FyZFwiKTtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfVxuICAgICAgICAvL2lmIHVuc3VjY2Vzc2Z1bFxuICAgICAgICBjb25zb2xlLmxvZyhcIlRyb3VibGUgZGVsZXRpbmcgY2FyZFwiKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBDYXJkIERlbGV0aW9uIEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSk7XG4gIH1cblxuICBjYXJkTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjEvY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCxcbiAgICAgIHtcbiAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgYXV0aG9yaXphdGlvbjogXCI0NzkyZWM5Mi1jZjFjLTQ1YTYtODc0MC0wZjVkNjM1ODVmYWFcIixcbiAgICAgICAgfSxcbiAgICAgIH1cbiAgICApXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInJlc3BvbnNlIG9rOiBcIiArIHJlcy5zdGF0dXMpO1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9XG4gICAgICAgIC8vaWYgdW5zdWNjZXNzZnVsXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVW5hYmxlIHRvIExpa2VcIik7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgTGlrZSBFcnJvcjogICsgJHtyZXMuc3RhdHVzfWApO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KTtcbiAgfVxuXG4gIGNhcmRVbmxpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKFxuICAgICAgYGh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxL2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsXG4gICAgICB7XG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIGF1dGhvcml6YXRpb246IFwiNDc5MmVjOTItY2YxYy00NWE2LTg3NDAtMGY1ZDYzNTg1ZmFhXCIsXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYFVubGlrZSBTdGF0dXM6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTsgLy9wYXJzZSBkYXRhXG4gICAgICAgIH1cbiAgICAgICAgLy9pZiB1bnN1Y2Nlc3NmdWxcbiAgICAgICAgY29uc29sZS5sb2coXCJVbmFibGUgVG8gVW5saWtlXCIpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgLy9wcm9jZXNzIGVycm9yc1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVDYXJkRGVsZXRlIiwiaGFuZGxlQ2FyZExpa2UiLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2lkIiwiX2xpa2UiLCJpc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUNhcmREZWxldGUiLCJfaGFuZGxlQ2FyZExpa2UiLCJ2aWV3Q2FyZCIsImNhcmRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNsb25lTm9kZSIsIl9jYXJkRWxlbWVudCIsIl9jcmVhdGVDYXJkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY2FyZEltYWdlRWxlbWVudCIsImNhcmRUaXRsZUVsZW1lbnQiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIl91cGRhdGVMaWtlU3RhdHVzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsImFkZCIsImNvbnNvbGUiLCJsb2ciLCJyZW1vdmUiLCJ1cGRhdGVMaWtlIiwiTGlrZWQiLCJGb3JtVmFsaWRhdG9yIiwiZm9ybSIsIl9jb25maWciLCJfZm9ybSIsIl9pbnB1dEVsZW1lbnRzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImlucHV0RWwiLCJfaGFuZGxlSW5wdXRFdmVudCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2NoZWNrRm9ybVZhbGlkaXR5IiwiZXZlcnkiLCJpbnB1dCIsImRpc2FibGVkIiwicmVzZXRGb3JtIiwicmVzZXQiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW5Qb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlUG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJldnQiLCJ0YXJnZXQiLCJrZXkiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1JbnB1dHMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dHNPYmoiLCJ2YWx1ZSIsInByb2ZpbGVFZGl0QnV0dG9uIiwicHJvZmlsZU1vZGFsIiwicHJvZmlsZVRpdGxlSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVFZGl0Rm9ybSIsImFkZENhcmRNb2RhbCIsImFkZE5ld0NhcmRCdXR0b24iLCJhZGRDYXJkRm9ybUVsZW1lbnQiLCJhZGROZXdDYXJkU3VibWl0QnV0dG9uIiwiZGVsZXRlTW9kYWwiLCJkZWxldGVNb2RhbEJ1dHRvbiIsImRlbGV0ZU1vZGFsQ2xvc2VCdXR0b24iLCJhdmF0YXJNb2RhbCIsImF2YXRhckVkaXRCdXR0b24iLCJhdmF0YXJNb2RhbENsb3NlQnV0dG9uIiwiYXZhdGFyTW9kYWxTdWJtaXRCdXR0b24iLCJzZWN0aW9uIiwiY29udGFpbmVyIiwiaXRlbSIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbXMiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJyZW5kZXJDYXJkIiwidXNlciIsImpvYiIsImF2YXRhciIsIl9qb2IiLCJfYXZhdGFyIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwic2V0VXNlckF2YXRhciIsInByb2ZpbGVQb3B1cCIsInByb2ZpbGVEYXRhIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImFwaSIsInVwZGF0ZVVzZXJJbmZvIiwidXBkYXRlZFVzZXJJbmZvIiwibmV3Q2FyZFBvcHVwIiwibmV3Q2FyZERhdGEiLCJjcmVhdGVOZXdDYXJkIiwidXJsIiwidGhlbiIsInJlcyIsImFkZE5ld0NhcmRWYWxpZGF0b3IiLCJjYXRjaCIsImVyciIsImVycm9yIiwic2V0VGltZW91dCIsInBvcHVwSW1hZ2UiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cEltYWdlVGV4dCIsImF2YXRhclBvcHVwIiwiaGFuZGxlQXZhdGFyVXBkYXRlIiwib3B0aW9ucyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0VXNlckFuZENhcmRzIiwiYWxsIiwidXBkYXRlUHJvZmlsZVBpYyIsInVzZXJJbmZvIiwiY2FyZHMiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiZGVsZXRlQ2FyZCIsImNhcmRJZCIsImNhcmRMaWtlIiwiY2FyZFVubGlrZSIsImJhc2VVUkwiLCJjbG9zZURlbGV0ZU1vZGFsIiwiaGFuZGxlQ2FyZExpa2VzIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJldmVudCJdLCJzb3VyY2VSb290IjoiIn0=